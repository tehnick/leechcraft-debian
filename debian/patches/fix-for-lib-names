Description: Fix for lib names
 Upstream is not interested in renaming these shared libraries.
Author: Boris Pek <tehnick-8@yandex.ru>
Last-Update: 2012-09-20

--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -104,7 +104,7 @@
 ADD_SUBDIRECTORY (xmlsettingsdialog)
 
 SET (LEECHCRAFT_INCLUDE_DIR ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_BINARY_DIR})
-SET (LEECHCRAFT_LIBRARIES lcutil xmlsettingsdialog)
+SET (LEECHCRAFT_LIBRARIES leechcraft-util leechcraft-xmlsettingsdialog)
 
 # Various options
 OPTION (STRICT_LICENSING "Makes LeechCraft more prepared, for example, to lacking artwork due to licensing restrictions" OFF)
--- a/src/FindLeechCraft.cmake.in
+++ b/src/FindLeechCraft.cmake.in
@@ -6,8 +6,8 @@
 IF (LEECHCRAFT_INCLUDE_DIR)
 	SET (LEECHCRAFT_INCLUDE_DIR "${LEECHCRAFT_INCLUDE_DIR}/leechcraft")
 ENDIF (LEECHCRAFT_INCLUDE_DIR)
-FIND_LIBRARY(_LEECHCRAFT_UTIL NAMES lcutil)
-FIND_LIBRARY(_LEECHCRAFT_XSD NAMES xmlsettingsdialog)
+FIND_LIBRARY(_LEECHCRAFT_UTIL NAMES leechcraft-util)
+FIND_LIBRARY(_LEECHCRAFT_XSD NAMES leechcraft-xmlsettingsdialog)
 SET (LEECHCRAFT_LIBRARIES ${_LEECHCRAFT_UTIL} ${_LEECHCRAFT_XSD})
 SET (LEECHCRAFT_USE_FILE "${CMAKE_MODULE_PATH}/UseLeechCraft.cmake")
 
--- a/src/util/CMakeLists.txt
+++ b/src/util/CMakeLists.txt
@@ -93,17 +93,18 @@
 ADD_DEFINITIONS(-DQT_NO_DEBUG)
 ADD_DEFINITIONS(-DQT_SHARED)
 ADD_DEFINITIONS(-DQT_GUI_LIB)
+ADD_DEFINITIONS(-Dlcutil_EXPORTS)
 IF (NOT LC_NO_MOC)
 	QT4_WRAP_CPP (MOC_SRCS ${HEADERS})
 ENDIF (NOT LC_NO_MOC)
-ADD_LIBRARY (lcutil SHARED
+ADD_LIBRARY (leechcraft-util SHARED
 	${SRCS}
 	${MOC_SRCS}
 	${UIS_H}
 	)
-TARGET_LINK_LIBRARIES (lcutil
+TARGET_LINK_LIBRARIES (leechcraft-util
 	${QT_LIBRARIES}
-	xmlsettingsdialog
+	leechcraft-xmlsettingsdialog
 	)
-SET_PROPERTY (TARGET lcutil PROPERTY SOVERSION 0.5.0)
-INSTALL (TARGETS lcutil DESTINATION ${LIBDIR})
+SET_PROPERTY (TARGET leechcraft-util PROPERTY SOVERSION 0.5.0)
+INSTALL (TARGETS leechcraft-util DESTINATION ${LIBDIR})
--- a/src/xmlsettingsdialog/CMakeLists.txt
+++ b/src/xmlsettingsdialog/CMakeLists.txt
@@ -5,6 +5,7 @@
 	${CMAKE_CURRENT_BINARY_DIR}
 	..
 	)
+ADD_DEFINITIONS (-Dxmlsettingsdialog_EXPORTS)
 
 SET (SRCS
     xmlsettingsdialog.cpp
@@ -104,12 +105,12 @@
 SET (XSD_SRCS ${XSD_SRCS} PARENT_SCOPE)
 SET (XSD_FORMS ${XSD_FORMS} PARENT_SCOPE)
 
-ADD_LIBRARY (xmlsettingsdialog SHARED
+ADD_LIBRARY (leechcraft-xmlsettingsdialog SHARED
 	${SRCS}
 	${MOC_SRCS}
 	${UIS_H})
-TARGET_LINK_LIBRARIES (xmlsettingsdialog
+TARGET_LINK_LIBRARIES (leechcraft-xmlsettingsdialog
 	${QT_LIBRARIES}
 	)
-SET_PROPERTY (TARGET xmlsettingsdialog PROPERTY SOVERSION 0.3.0)
-INSTALL (TARGETS xmlsettingsdialog DESTINATION ${LIBDIR})
+SET_PROPERTY (TARGET leechcraft-xmlsettingsdialog PROPERTY SOVERSION 0.3.0)
+INSTALL (TARGETS leechcraft-xmlsettingsdialog DESTINATION ${LIBDIR})
